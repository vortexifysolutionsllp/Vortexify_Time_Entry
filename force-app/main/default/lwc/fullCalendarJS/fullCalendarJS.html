<template>
	<template if:true={isModalOpen}>
		<section role="dialog" tabindex="-1" aria-labelledby="modal-heading-02" aria-modal="true"
			aria-describedby="modal-content-id-02" class="slds-modal slds-fade-in-open">
			<div class="slds-modal__container">
				<header class="slds-modal__header">
					<h2 id="modal-heading-02" class="slds-text-heading_medium slds-hyphenate">Holiday Management
						Calendar ðŸ“…
					</h2>
				</header>
				<div class="slds-modal__content slds-p-around_medium" id="modal-content-id-02">

					<!-- Spinner to show on waiting screens -->
					<template if:true={openSpinner}>
						<lightning-spinner alternative-text="Loading" size="medium"></lightning-spinner>
					</template>

					<div class="slds-grid slds-wrap slds-theme_default">
						<div class="slds-col slds-size_3-of-12">
							<!-- To display list of events or any parent records  
              TODO: add drag items in this div to drop on fullcalendar.
          -->
							<div class=" slds-p-around_medium slds-border_right slds-scrollable_y" style="height:800px">
								<div class="demo-only" style="padding:0.5rem;background:#16325c">
								<h3 class="slds-text-color_inverse slds-align_absolute-center">Taken Holidays ðŸ•› </h3>

								</div>
								<div class="slds-clearfix">
									
									<div class="slds-float_right slds-m-top_medium">
										<lightning-button icon-name="utility:add" slot="actions" alternative-text="add"
											title="Add" size="small" class="slds-p-around_medium" label="Add Holiday"
											onclick={addEvent}>
										</lightning-button>
									</div>
								</div>

								<template for:each={events} for:item="eachevent">
									<lightning-card key={eachevent.id} class="event-card-container">
										<div class="event-card slds-box slds-theme_default slds-p-around_medium">
											<!-- Title and Remove Icon -->
											<div class="slds-grid slds-grid_align-spread slds-grid_vertical-align-center slds-m-bottom_small">
												<div class="slds-media slds-media_center">
													<lightning-icon icon-name="standard:event" size="small" class="slds-m-right_small"></lightning-icon>
													<div class="slds-truncate event-title" title={eachevent.title}>{eachevent.title}</div>
												</div>
												<lightning-button-icon 
    icon-name="utility:delete"
    alternative-text="Delete"
    title="Delete"
    value={eachevent.id}
    onclick={removeEvent}
    class="delete-icon slds-m-left_small">
</lightning-button-icon>

											</div>
								
											<!-- Event Info Section -->
											<div class="slds-text-body_regular slds-text-color_default event-info">
												<p class="slds-m-bottom_x-small"><strong>Start : </strong>
													<lightning-formatted-date-time
														value={eachevent.start}
														year="numeric"
														month="short"
														day="2-digit">
													</lightning-formatted-date-time>
												</p>
								
												<p class="slds-m-bottom_x-small"><strong>End : </strong>
													<lightning-formatted-date-time
														value={eachevent.end}
														year="numeric"
														month="short"
														day="2-digit">
													</lightning-formatted-date-time>
												</p>
												<p><strong>All Day : </strong>
													<lightning-formatted-text value={eachevent.allDay}></lightning-formatted-text>
												</p>
											</div>
										</div>
									</lightning-card>
								</template>
								
							</div>
						</div>
						<div class="slds-col slds-size_9-of-12">
							<!-- fullcalendar sits in this div -->
							<div id="calendar" class="fullcalendarjs"></div>
						</div>
					</div>

					<!-- Open a modal with new event form  -->
					<template if:true={openModal}>
						<div data-modal="custommodal" class="modalclass">
							<section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
								aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
								<div class="slds-modal__container">
									<header class="slds-modal__header">
										<lightning-button-icon icon-name="utility:close" class="slds-modal__close "
											alternative-text="Close" title="Close" size="large" variant="bare-inverse"
											onclick={handleCancel}>
										</lightning-button-icon>
										<h2 id="modal-heading-01" class="slds-modal__title slds-hyphenate">Create
											Holiday ðŸ˜Ž</h2>
									</header>
									<div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
										<div class="slds-grid slds-wrap">
											<!-- Column 1 -->
											<div class="slds-col slds-size_1-of-2 slds-p-around_small">
												<lightning-input
													label="Title"
													name="title"
													type="text"
													required
													onkeyup={handleKeyup}>
												</lightning-input>
									
												<lightning-input
													label="Start Date"
													name="start"
													type="date"
													required
													value={startDate}>
												</lightning-input>
											</div>
									
											<!-- Column 2 -->
											<div class="slds-col slds-size_1-of-2 slds-p-around_small">									
												<lightning-combobox
													name="type"
													label="Types"
													value={value}
													placeholder="Select..."
													options={options}
													onchange={handleChange}>
												</lightning-combobox>
												<lightning-input
													label="End Date"
													name="end"
													type="date"
													required
													value={endDate}>
												</lightning-input>
											</div>
										</div>
									</div>
									
									<footer class="slds-modal__footer">
										<button class="slds-button slds-button_neutral" onclick={closeModal} title="Cancel">Cancel</button>
										<button class="slds-button slds-button_success" onclick={handleSave} title="Save">Save</button>
									</footer>
								</div>
							</section>
							<div class="slds-backdrop slds-backdrop_open"></div>
						</div>
					</template>
				</div>
				<footer class="slds-modal__footer">
					<button class="slds-button slds-button_neutral" onclick={closeModalManin} title="Cancel">Close</button>
				</footer>
			</div>
		</section>
		<div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
	</template>
</template>