<apex:page controller="FileUploadController" contenttype="text/html" showHeader="false" sidebar="false">
    <html>
        <head>
            <style>
                body {
                    font-family: Arial, sans-serif;
                    background-color: #f4f4f4;
                    margin: 0;
                    padding: 20px;
                }
                .container {
                    max-width: 600px;
                    margin: 0 auto;
                    background-color: #fff;
                    padding: 20px;
                    border-radius: 8px;
                    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                }
                h1 {
                    font-size: 24px;
                    color: #333;
                    margin-bottom: 20px;
                    text-align: center;
                }
                .form-group {
                    margin-bottom: 15px;
                }
                label {
                    display: block;
                    margin-bottom: 5px;
                    font-weight: bold;
                }
                .input-file {
                    display: block;
                    width: 100%;
                    padding: 10px;
                    margin-bottom: 10px;
                    border: 1px solid #ccc;
                    border-radius: 4px;
                    background-color: #fafafa;
                }
                .btn-submit {
                    display: block;
                    width: 100%;
                    padding: 10px;
                    background-color: #0070d2;
                    color: #fff;
                    border: none;
                    border-radius: 4px;
                    font-size: 16px;
                    cursor: pointer;
                    transition: background-color 0.3s;
                }
                .btn-submit:hover {
                    background-color: #0056a0;
                }
                .alert {
                    padding: 15px;
                    margin-bottom: 20px;
                    border-radius: 4px;
                }
                .alert.success {
                    background-color: #d4edda;
                    color: #155724;
                    border: 1px solid #c3e6cb;
                }
                .alert.error {
                    background-color: #f8d7da;
                    color: #721c24;
                    border: 1px solid #f5c6cb;
                }
                .preview-container {
                    margin-top: 20px;
                    text-align: center;
                }
                .preview-image {
                    max-width: 100%;
                    max-height: 300px;
                    border: 1px solid #ddd;
                    border-radius: 4px;
                    margin-top: 10px;
                }
                .preview-text {
                    color: #333;
                    margin-top: 10px;
                    font-size: 16px;
                }
            </style>
            <script>
                function handleFileSelect(event) {
                    var file = event.target.files[0];
                    var reader = new FileReader();

                    reader.onload = function(e) {
                        var filePreview = document.getElementById('filePreview');
                        var previewText = document.getElementById('previewText');
                        var previewContainer = document.querySelector('.preview-container');

                        if (file.type.startsWith('image/')) {
                            filePreview.src = e.target.result;
                            filePreview.style.display = 'block';
                            previewText.style.display = 'none';
                        } else {
                            filePreview.style.display = 'none';
                            previewText.textContent = 'File selected: ' + file.name;
                            previewText.style.display = 'block';
                        }

                        previewContainer.style.display = 'block';
                    };

                    reader.readAsDataURL(file);
                }
            </script>
        </head>
        <body>
            <div class="container">
                <h1>Upload Your File</h1>
                <apex:form enctype="multipart/form-data">
                    <apex:pageMessages />
                    
                    <!-- File Upload Section -->
                    <div class="form-group">
                        <label for="fileUpload">Choose File:</label>
                        <apex:inputFile value="{!fileBody}" filename="{!fileName}" styleClass="input-file" onchange="handleFileSelect(event)" />
                    </div>
                    <apex:commandButton value="Upload File" action="{!upload}" styleClass="btn-submit" />

                    <!-- Preview Section -->
                    <div class="preview-container" style="display:none;">
                        <img id="filePreview" class="preview-image" style="display:none;" />
                        <div id="previewText" class="preview-text" style="display:none;"></div>
                    </div>
                </apex:form>
            </div>
        </body>
    </html>
</apex:page>